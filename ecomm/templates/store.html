{% extends "base.html" %}
{% load static %}

{% block title %}Store | GreatKart{% endblock %}

{% block content %}
<section class="section-pagetop bg">
  <div class="container">
    <h2 class="title-page">Our Store</h2>
  </div>
</section>

<section class="section-content padding-y">
  <div class="container">
    <div class="row">

      <!-- âœ… Sidebar with category filter -->
      <aside class="col-md-3">
        <div class="card">
          <div class="card-header">
            <h6 class="mb-0">Categories</h6>
          </div>
          <ul class="list-group list-group-flush">
            {% for category in links %}
              <li class="list-group-item">
                <a href="{% url 'products_by_category' category.slug %}">
                  {{ category.category_name|upper }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </aside>

      <main class="col-md-9">
        <header class="border-bottom mb-4 pb-3">
          <div class="form-inline">
            <span class="mr-md-auto">{{ products|length }} Items found</span>
          </div>
        </header>

        <div class="row">
          {% for product in products %}
<div class="col-md-3 mb-4">
    <div class="card card-product-grid h-100">
        <a href="{% url 'product_detail' product.id %}">
            <div class="img-wrap">
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid">
                {% else %}
                <img src="/static/images/no-image.png" alt="No image available" class="img-fluid">
                {% endif %}
            </div>
        </a>
        <figcaption class="info-wrap p-2 text-center">
            <h6 class="title mb-1">{{ product.name }}</h6>
            <div class="price text-primary">${{ product.price|floatformat:2 }}</div>
        </figcaption>
    </div>
</div>

          {% empty %}
          <p class="text-muted">No products available.</p>
          {% endfor %}
        </div>

        <!-- Pagination -->
        <nav class="mt-4" aria-label="Page navigation">
          <ul class="pagination">
            <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">Next</a></li>
          </ul>
        </nav>
      </main>

    </div>
  </div>
</section>
{% endblock %}
